require './uppg1'
require 'test/unit'

class TestHelpers < Test::Unit::TestCase
  def test_get_lowest()
    data1 = [10, 5, 6, 3, 2, 239, 1]
    data2 = [10, 5, 6, 3, 2, -239, 1]
    data3 = [10, 5, 6, 3, 2, 239, 1, 0]
    data4 = [[0, 1], [0, 10], [0, -1], [-1, 1], [-10, 1]]
    data5 = {"test1"=> 1, "test2"=> 2, "test3"=> 3, "test4"=> 4,"test5" => -1}

    assert_equal(1, get_lowest(data1) { | a | a })
    assert_equal(-239, get_lowest(data2) { | a | a })
    assert_equal(0, get_lowest(data3) { | a | a })

    assert_equal(1, get_lowest(data2) { | a | a.abs() })

    assert_equal([-10, 1], get_lowest(data4) { | a | a[0] })
    assert_equal([0, -1], get_lowest(data4) { | a | a[1] })

    assert_equal(["test5", -1], get_lowest(data5) { | a | a[1] })
  end

  def test_sort_by()
    data1 = [10, 5, 6, 3, 2, 239, 1]
    data2 = [10, 5, 6, 3, 2, -239, 1]
    data3 = [10, 5, 6, 3, 2, 239, 1, 0]
    data4 = [[0, 1], [0, 10], [0, -1], [-1, 1], [-10, 1]]
    data5 = {"test1"=> 1, "test2"=> 2, "test3"=> 3, "test4"=> 4,"test5" => -1}

    assert_equal([239, 10, 6, 5, 3, 2, 1], sort_by(data1) { | a | a })
    assert_equal([10, 6, 5, 3, 2, 1, -239], sort_by(data2) { | a | a })
    assert_equal([239, 10, 6, 5, 3, 2, 1, 0], sort_by(data3) { | a | a })

    assert_equal([-239, 10, 6, 5, 3, 2, 1], sort_by(data2) { | a | a.abs() })

    assert_equal([[0, 1], [0, 10], [0, -1], [-1, 1], [-10, 1]], sort_by(data4) { | a | a[0] })
    assert_equal([[0, 10], [0, 1], [-1, 1], [-10, 1], [0, -1]], sort_by(data4) { | a | a[1] })

    assert_equal([["test4", 4], ["test3", 3], ["test2", 2], ["test1", 1], ["test5", -1]], sort_by(data5) { | a | a[1] })
  end
end

class TestFootbalFunctions < Test::Unit::TestCase
  def setup()
    @hash1 = get_football_hash("football_test.txt")
    @hash2 = get_football_hash("football.txt")
  end

  def test_get_football_hash()
    res1 = {
      "Arsenal"=>[38, 26, 9, 3, 79, 36, 87],
      "Liverpool"=>[38, 24, 8, 6, 67, 30, 80],
      "Manchester_U"=>[38, 24, 5, 9, 87, 45, 77]
    }
    assert_equal(res1, @hash1)

    res2 = {
      "Arsenal"=>[38, 26, 9, 3, 79, 36, 87],
      "Aston_Villa"=>[38, 12, 14, 12, 46, 47, 50],
      "Blackburn"=>[38, 12, 10, 16, 55, 51, 46],
      "Bolton"=>[38, 9, 13, 16, 44, 62, 40],
      "Charlton"=>[38, 10, 14, 14, 38, 49, 44],
      "Chelsea"=>[38, 17, 13, 8, 66, 38, 64],
      "Derby"=>[38, 8, 6, 24, 33, 63, 30],
      "Everton"=>[38, 11, 10, 17, 45, 57, 43],
      "Fulham"=>[38, 10, 14, 14, 36, 44, 44],
      "Ipswich"=>[38, 9, 9, 20, 41, 64, 36],
      "Leeds"=>[38, 18, 12, 8, 53, 37, 66],
      "Leicester"=>[38, 5, 13, 20, 30, 64, 28],
      "Liverpool"=>[38, 24, 8, 6, 67, 30, 80],
      "Manchester_U"=>[38, 24, 5, 9, 87, 45, 77],
      "Middlesbrough"=>[38, 12, 9, 17, 35, 47, 45],
      "Newcastle"=>[38, 21, 8, 9, 74, 52, 71],
      "Southampton"=>[38, 12, 9, 17, 46, 54, 45],
      "Sunderland"=>[38, 10, 10, 18, 29, 51, 40],
      "Tottenham"=>[38, 14, 8, 16, 49, 53, 50],
      "West_Ham"=>[38, 15, 8, 15, 48, 57, 53]
    }
    assert_equal(res2, @hash2)
  end

  def test_get_lowest_football_team()
    assert_equal(["Liverpool", [38, 24, 8, 6, 67, 30, 80]], get_lowest_football_team(@hash1))
    assert_equal(["Aston_Villa", [38, 12, 14, 12, 46, 47, 50]], get_lowest_football_team(@hash2))
  end

  def test_sort_by_goals()
    res1 = [
      ["Arsenal", [38, 26, 9, 3, 79, 36, 87]],
      ["Manchester_U", [38, 24, 5, 9, 87, 45, 77]],
      ["Liverpool", [38, 24, 8, 6, 67, 30, 80]]
    ]

    res2 = [
      ["Arsenal", [38, 26, 9, 3, 79, 36, 87]],
      ["Manchester_U", [38, 24, 5, 9, 87, 45, 77]],
      ["Liverpool", [38, 24, 8, 6, 67, 30, 80]],
      ["Chelsea", [38, 17, 13, 8, 66, 38, 64]],
      ["Newcastle", [38, 21, 8, 9, 74, 52, 71]],
      ["Leeds", [38, 18, 12, 8, 53, 37, 66]],
      ["Blackburn", [38, 12, 10, 16, 55, 51, 46]],
      ["Aston_Villa", [38, 12, 14, 12, 46, 47, 50]],
      ["Tottenham", [38, 14, 8, 16, 49, 53, 50]],
      ["Southampton", [38, 12, 9, 17, 46, 54, 45]],
      ["Fulham", [38, 10, 14, 14, 36, 44, 44]],
      ["West_Ham", [38, 15, 8, 15, 48, 57, 53]],
      ["Charlton", [38, 10, 14, 14, 38, 49, 44]],
      ["Middlesbrough", [38, 12, 9, 17, 35, 47, 45]],
      ["Everton", [38, 11, 10, 17, 45, 57, 43]],
      ["Bolton", [38, 9, 13, 16, 44, 62, 40]],
      ["Sunderland", [38, 10, 10, 18, 29, 51, 40]],
      ["Ipswich", [38, 9, 9, 20, 41, 64, 36]],
      ["Derby", [38, 8, 6, 24, 33, 63, 30]],
      ["Leicester", [38, 5, 13, 20, 30, 64, 28]]
   ]

    assert_equal(res1, sort_by_goals(@hash1))
    assert_equal(res2, sort_by_goals(@hash2))
  end
end

class TestWeatherFunctions < Test::Unit::TestCase
  def setup()
    @data1 = get_weather_data("weather_test.txt")
    @data2 = get_weather_data("weather.txt")
  end

  def test_get_weather_data()
    # Fold this plz
    res1 = [
      ["1", 88, 59, "74", "", "53.8", "0.00", "F", "280", "9.6", "270", "17", "1.6", "93", "23", "1004.5"],
   ["2",
    79,
    63,
    "71",
    "",
    "46.5",
    "0.00",
    "",
    "330",
    "8.7",
    "340",
    "23",
    "3.3",
    "70",
    "28",
    "1004.5"],
   ["3",
    77,
    55,
    "66",
    "",
    "39.6",
    "0.00",
    "",
    "350",
    "5.0",
    "350",
    "9",
    "2.8",
    "59",
    "24",
    "1016.8"],
   ["4",
    77,
    59,
    "68",
    "",
    "51.1",
    "0.00",
    "",
    "110",
    "9.1",
    "130",
    "12",
    "8.6",
    "62",
    "40",
    "1021.1"],
   ["5",
    90,
    66,
    "78",
    "",
    "68.3",
    "0.00",
    "TFH",
    "220",
    "8.3",
    "260",
    "12",
    "6.9",
    "84",
    "55",
    "1014.4"],
   ["6",
    81,
    61,
    "71",
    "",
    "63.7",
    "0.00",
    "RFH",
    "030",
    "6.2",
    "030",
    "13",
    "9.7",
    "93",
    "60",
    "1012.7"],
   ["7",
    73,
    57,
    "65",
    "",
    "53.0",
    "0.00",
    "RF",
    "050",
    "9.5",
    "050",
    "17",
    "5.3",
    "90",
    "48",
    "1021.8"],
   ["8",
    75,
    54,
    "65",
    "",
    "50.0",
    "0.00",
    "FH",
    "160",
    "4.2",
    "150",
    "10",
    "2.6",
    "93",
    "41",
    "1026.3"],
   ["9",
    86,
    32,
    "59",
    "6",
    "61.5",
    "0.00",
    "",
    "240",
    "7.6",
    "220",
    "12",
    "6.0",
    "78",
    "46",
    "1018.6"],
   ["10",
    84,
    64,
    "74",
    "",
    "57.5",
    "0.00",
    "F",
    "210",
    "6.6",
    "050",
    "9",
    "3.4",
    "84",
    "40",
    "1019.0"]
    ]
    assert_equal(res1, @data1)
  end

  def test_get_lowest_temp_diff()
    res1 = ["2", 79, 63, "71", "", "46.5", "0.00", "", "330", "8.7", "340", "23", "3.3", "70", "28", "1004.5"]
    res2 = ["14", 61, 59, "60", "5", "55.9", "0.00", "RF", "060", "6.7", "080", "9", "10.0", "93", "87", "1008.6"]
    assert_equal(res1, get_lowest_temp_diff(@data1))
    assert_equal(res2, get_lowest_temp_diff(@data2))
  end

  def test_sort_by_temp_diff()
    # PLZ fold this
    res = [
    ["9",
    86,
    32,
    "59",
    "6",
    "61.5",
    "0.00",
    "",
    "240",
    "7.6",
    "220",
    "12",
    "6.0",
    "78",
    "46",
    "1018.6"],
   ["1",
    88,
    59,
    "74",
    "",
    "53.8",
    "0.00",
    "F",
    "280",
    "9.6",
    "270",
    "17",
    "1.6",
    "93",
    "23",
    "1004.5"],
   ["5",
    90,
    66,
    "78",
    "",
    "68.3",
    "0.00",
    "TFH",
    "220",
    "8.3",
    "260",
    "12",
    "6.9",
    "84",
    "55",
    "1014.4"],
   ["3",
    77,
    55,
    "66",
    "",
    "39.6",
    "0.00",
    "",
    "350",
    "5.0",
    "350",
    "9",
    "2.8",
    "59",
    "24",
    "1016.8"],
   ["8",
    75,
    54,
    "65",
    "",
    "50.0",
    "0.00",
    "FH",
    "160",
    "4.2",
    "150",
    "10",
    "2.6",
    "93",
    "41",
    "1026.3"],
   ["10",
    84,
    64,
    "74",
    "",
    "57.5",
    "0.00",
    "F",
    "210",
    "6.6",
    "050",
    "9",
    "3.4",
    "84",
    "40",
    "1019.0"],
   ["6",
    81,
    61,
    "71",
    "",
    "63.7",
    "0.00",
    "RFH",
    "030",
    "6.2",
    "030",
    "13",
    "9.7",
    "93",
    "60",
    "1012.7"],
   ["4",
    77,
    59,
    "68",
    "",
    "51.1",
    "0.00",
    "",
    "110",
    "9.1",
    "130",
    "12",
    "8.6",
    "62",
    "40",
    "1021.1"],
   ["7",
    73,
    57,
    "65",
    "",
    "53.0",
    "0.00",
    "RF",
    "050",
    "9.5",
    "050",
    "17",
    "5.3",
    "90",
    "48",
    "1021.8"],
   ["2",
    79,
    63,
    "71",
    "",
    "46.5",
    "0.00",
    "",
    "330",
    "8.7",
    "340",
    "23",
    "3.3",
    "70",
    "28",
    "1004.5"]
    ]

    assert_equal(res, sort_by_temp_diff(@data1))
  end
end